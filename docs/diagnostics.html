<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Markus Min" />

<meta name="date" content="2024-03-04" />

<title>Diagnostics</title>

<script src="site_libs/header-attrs-2.20/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Steelhead Movement</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="structure.html">Structure</a>
</li>
<li>
  <a href="diagnostics.html">Diagnostics</a>
</li>
<li>
  <a href="results.html">Results</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Diagnostics</h1>
<h4 class="author">Markus Min</h4>
<h4 class="date">2024-03-04</h4>

</div>


<p>Here I show three diagnostics: <a
href="#convergence-and-efficiency">Convergence and efficiency</a>, <a
href="#traceplots">Traceplots</a>, and <a href="#pairs-plots">Pairs
plots</a>.</p>
<div id="convergence-and-efficiency" class="section level2">
<h2>Convergence and efficiency</h2>
<p>From the <a href="https://mc-stan.org/rstan/reference/Rhat.html">Stan
documentation on convergence and efficiency diagnostics for Markov
Chains</a>:</p>
<blockquote>
<p>The <strong>Rhat</strong> function produces R-hat convergence
diagnostic, which compares the between- and within-chain estimates for
model parameters and other univariate quantities of interest. If chains
have not mixed well (ie, the between- and within-chain estimates don’t
agree), R-hat is larger than 1. We recommend running at least four
chains by default and only using the sample if R-hat is less than 1.05.
Stan reports R-hat which is the maximum of rank normalized split-R-hat
and rank normalized folded-split-R-hat, which works for thick tailed
distributions and is sensitive also to differences in scale.</p>
</blockquote>
<blockquote>
<p>The <strong>ess_bulk</strong> function produces an estimated Bulk
Effective Sample Size (bulk-ESS) using rank normalized draws. Bulk-ESS
is useful measure for sampling efficiency in the bulk of the
distribution (related e.g. to efficiency of mean and median estimates),
and is well defined even if the chains do not have finite mean or
variance.</p>
</blockquote>
<blockquote>
<p>The <strong>ess_tail</strong> function produces an estimated Tail
Effective Sample Size (tail-ESS) by computing the minimum of effective
sample sizes for 5% and 95% quantiles. Tail-ESS is useful measure for
sampling efficiency in the tails of the distribution (related e.g. to
efficiency of variance and tail quantile estimates).</p>
</blockquote>
<blockquote>
<p>Both bulk-ESS and tail-ESS should be at least 100 (approximately) per
Markov Chain in order to be reliable and indicate that estimates of
respective posterior quantiles are reliable.</p>
</blockquote>
<p>In the plots below, I will show these three diagnostics for the
models run for each of our six populations.</p>
<p><br></p>
<div class="float">
<img src="site_figures/conv_eff/rhat_comb_plots.png"
alt="R-hat statistics. R-hat values should be less than 1.05, and all parameters here have an R-hat of less than 1.01." />
<div class="figcaption">R-hat statistics. R-hat values should be less
than 1.05, and all parameters here have an R-hat of less than
1.01.</div>
</div>
<p><br></p>
<div class="float">
<img src="site_figures/conv_eff/ess_bulk_comb_plots.png"
alt="Bulk Effective Sample Size (bulk-ESS). bulk-ESS should be at least 100 in order for posteriors to be reliable, but a bulk-ESS greater than the number of draws (which in this case is 4 chains x 1000 iter) indicates anticorrelation between draws, which reduces the reliability of the variance estimate. bulk-ESS indicates that all parameters have a sufficient sample size, but a handful of parameters exhibit a slight degree of anticorrelation (bulk-ESS &gt; 4,000)." />
<div class="figcaption">Bulk Effective Sample Size (bulk-ESS). bulk-ESS
should be at least 100 in order for posteriors to be reliable, but a
bulk-ESS greater than the number of draws (which in this case is 4
chains x 1000 iter) indicates anticorrelation between draws, which
reduces the reliability of the variance estimate. bulk-ESS indicates
that all parameters have a sufficient sample size, but a handful of
parameters exhibit a slight degree of anticorrelation (bulk-ESS &gt;
4,000).</div>
</div>
<p><br></p>
<div class="float">
<img src="site_figures/conv_eff/ess_tail_comb_plots.png"
alt="Tail Effective Sample Size (tail-ESS). tail-ESS should be at least 100 in order for posteriors to be reliable, but a tail-ESS greater than the number of draws (which in this case is 4 chains x 1000 iter) indicates anticorrelation between draws, which reduces the reliability of the variance estimate. tail-ESS indicates that all parameters have a sufficient sample size, but a handful of parameters exhibit a slight degree of anticorrelation (tail-ESS &gt; 4,000)." />
<div class="figcaption">Tail Effective Sample Size (tail-ESS). tail-ESS
should be at least 100 in order for posteriors to be reliable, but a
tail-ESS greater than the number of draws (which in this case is 4
chains x 1000 iter) indicates anticorrelation between draws, which
reduces the reliability of the variance estimate. tail-ESS indicates
that all parameters have a sufficient sample size, but a handful of
parameters exhibit a slight degree of anticorrelation (tail-ESS &gt;
4,000).</div>
</div>
<p><br></p>
</div>
<div id="traceplots" class="section level2">
<h2>Traceplots</h2>
<p>Given that each model is estimating hundreds of parameters,
traceplots for all parameters will not be shown here. Instead,
traceplots for a few parameters from each model will be shown here.</p>
<div class="float">
<img src="site_figures/traceplots/UCW_traceplots.png"
alt="Upper Columbia Wild traceplots." />
<div class="figcaption">Upper Columbia Wild traceplots.</div>
</div>
<p><br></p>
<div class="float">
<img src="site_figures/traceplots/UCH_traceplots.png"
alt="Upper Columbia Hatchery traceplots." />
<div class="figcaption">Upper Columbia Hatchery traceplots.</div>
</div>
<p><br></p>
<div class="float">
<img src="site_figures/traceplots/MCW_traceplots.png"
alt="Middle Columbia Wild traceplots." />
<div class="figcaption">Middle Columbia Wild traceplots.</div>
</div>
<p><br></p>
<div class="float">
<img src="site_figures/traceplots/MCH_traceplots.png"
alt="Middle Columbia Hatchery traceplots." />
<div class="figcaption">Middle Columbia Hatchery traceplots.</div>
</div>
<p><br></p>
<div class="float">
<img src="site_figures/traceplots/SRW_traceplots.png"
alt="Snake River Wild traceplots." />
<div class="figcaption">Snake River Wild traceplots.</div>
</div>
<p><br></p>
<div class="float">
<img src="site_figures/traceplots/SRH_traceplots.png"
alt="Snake River Hatchery traceplots." />
<div class="figcaption">Snake River Hatchery traceplots.</div>
</div>
<p><br></p>
</div>
<div id="pairs-plots" class="section level2">
<h2>Pairs plots</h2>
<p>Pairs plots show univariate histograms and bivariate scatter plots
for selected parameters, and are especially useful for identifying
collinearity between variables (which manifests as narrow bivariate
plots) as well as the presence of multiplicative non-identifiabilities
(banana-like shapes).</p>
<p>For these pairs plots, I am showing all of the different parameters
that exist for a single movement (e.g., the intercept, origin, and
temperature parameters that govern the probability of a single movement,
such as ascending a specific dam). Again, there are too many movements
across the six models to show all of these plots, but I will show
examples of potential issues related to collinearity in our predictors.
A description of collinearity of predictors in regressions can be found
in the <a
href="https://mc-stan.org/docs/stan-users-guide/collinearity.html">Stan
User Guide</a>.</p>
<p>The three potential issues that I observe related to collinearity are
the following:</p>
<ol style="list-style-type: decimal">
<li>Collinearity between temperature and intercept parameters, for
ascending mainstem dams: <a
href="#temperature-and-intercept-collinearity">Temperature and intercept
collinearity</a></li>
<li>Collinearity between intercept and origin parameters: <a
href="#intercept-and-origin-collinearity">Intercept and origin
collinearity</a></li>
<li>Collinearity between intercept and spill parameters, for en-route
fallback:<a href="#intercept-and-spill-collinearity">Intercept and spill
collinearity</a></li>
</ol>
<p><br></p>
<div id="temperature-and-intercept-collinearity" class="section level3">
<h3>Temperature and intercept collinearity</h3>
<div class="float">
<img src="site_figures/pairs_plots/UCW/_2_3_pairs_plot.png"
alt="Upper Columbia Wild Steelhead, ascending McNary Dam (moving from state 2, BON to MCN, to state 3, MCN to PRA or ICH)." />
<div class="figcaption">Upper Columbia Wild Steelhead, ascending McNary
Dam (moving from state 2, BON to MCN, to state 3, MCN to PRA or
ICH).</div>
</div>
<p><br> <br></p>
<div class="float">
<img src="site_figures/pairs_plots/SRH/_2_3_pairs_plot.png"
alt="Snake River Hatchery Steelhead, ascending McNary Dam (moving from state 2, BON to MCN, to state 3, MCN to PRA or ICH)." />
<div class="figcaption">Snake River Hatchery Steelhead, ascending McNary
Dam (moving from state 2, BON to MCN, to state 3, MCN to PRA or
ICH).</div>
</div>
<p><br> <br></p>
<p>For ascents of dams, particularly those that are downstream of natal
tributaries, the intercept parameter (<em>b0</em>) and the temperature
parameter (<em>btemp1</em>) that estimates the effect of river
temperature during summer/fall (Jun 1 - Dec 31) are highly negatively
correlated. Shown above are two pairs plots for the parameters that
govern the probability of ascending McNary Dam for Upper Columbia Wild
Steelhead and Snake River Hatchery Steelhead. As seen in the plots,
<em>b0</em> and <em>btemp1</em> are strongly negatively correlated,
while <em>b0</em> and <em>btemp0</em> (the effect of river temperature
during winter/spring, Jan 1 - May 1) are also negatively correlated.</p>
<p>My understanding of why this is happening is that this upstream
movement is the dominant movement out of this state (as reaching natal
tributaries for all fish from these DPSs requires ascending McNary Dam),
and this upstream movement is also happening when temperatures are
highest (in alignment with migration in the late summer/early fall). The
negative collinearity arises from the pattern that when the intercept
(<em>b0</em>) draw is low, the temperature (<em>btemp1</em>) draw must
be high to explain the high probability of that movement, and vice
versa.</p>
<p>Interestingly, the parameter estimates for the effect of temperature
on ascending McNary Dam (a necessary movement for these fish to reach
their natal tributaries) indicate that warmer temperatures actually
decrease the probability of making this ascent, therefore making other
movements (such as movements into tribuatries like the Deschutes, or
into the loss state) more likely in warmer conditions.</p>
<p>Of course, temperature and day of year are strongly linked, as seen
by these plots showing counts of ascents of McNary Dam by day of year
and temperature, for Upper Columbia and Snake River Steelhead:</p>
<div class="float">
<img src="site_figures/covariate_plots/UC_MCN_temp_v_date.png"
style="width:50.0%"
alt="Upper Columbia River Steelhead ascents at McNary Dam by day of year and temperature." />
<div class="figcaption">Upper Columbia River Steelhead ascents at McNary
Dam by day of year and temperature.</div>
</div>
<p><br></p>
<div class="float">
<img src="site_figures/covariate_plots/SR_MCN_temp_v_date.png"
style="width:50.0%"
alt="Snake River Steelhead ascents at McNary Dam by day of year and temperature." />
<div class="figcaption">Snake River Steelhead ascents at McNary Dam by
day of year and temperature.</div>
</div>
<p><br> <br></p>
</div>
<div id="intercept-and-origin-collinearity" class="section level3">
<h3>Intercept and origin collinearity</h3>
<p>For some movements there is a strong correlation between draws for
the intercept term and draws for the origin term. This collinearity
actually makes me want to restructure how we incorporate origin effects.
To explain, let’s look at this pairs plot for Upper Columbia Wild
Steelhead (UCW), with the probability of descending Rocky Reach Dam
(this is moving from state 6, which is RRE to WEL, to state 5, which is
RIS to RRE).</p>
<div class="float">
<img src="site_figures/pairs_plots/UCW/_6_5_pairs_plot.png"
alt="Upper Columbia Wild Steelhead, descending Rocky Reach Dam (moving from state 6, which is RRE to WEL, to state 5, which is RIS to RRE)." />
<div class="figcaption">Upper Columbia Wild Steelhead, descending Rocky
Reach Dam (moving from state 6, which is RRE to WEL, to state 5, which
is RIS to RRE).</div>
</div>
<p><br></p>
<p>For UCW, we have three origins: Wenatchee, Entiat, and Methow. For
Wenatchee Steelhead, this movement (falling back over Rocky Reach Dam)
is beneficial (it represents post-overshoot fallback); for Entiat and
Methow, which have origins above RRE, this movement is not desirable. To
interpret these origin parameters, a reminder of how these are included
in the model:</p>
<ul>
<li>Every fish gets an intercept term (this is
<em>b0_matrix_6_5</em>)</li>
<li>Wenatchee fish are origin 1, which means they get
<em>borigin1_matrix_6_5</em> in addition to the intercept</li>
<li>Entiat fish are origin 2, which means they get
<em>borigin2_matrix_6_5</em> in addition to the intercept</li>
<li>Methow fish receive -1 * (<em>borigin1_matrix_6_5</em> +
<em>borigin2_matrix_6_5</em>)</li>
</ul>
<p>According to where their natal tributaries are,
<em>borigin2_matrix_6_5</em> should be <strong>negative</strong> for
Entiat fish (they don’t want to fall back), but should be
<strong>positive</strong> for Methow fish (because they also don’t want
to fall back, but are affected by -1 * <em>borigin2_matrix_6_5</em>).
This leads to the biologically nonsensical positive estimate for
<em>borigin2_matrix_6_5</em> that would imply that Entiat fish want to
fall back over Rocky Reach (they dont’t) seen in the pairs plot as well
as the negative correlation between this parameter and
<em>b0_matrix_6_5</em>, as higher positive values of
<em>borigin2_matrix_6_5</em> require a more negative value of
<em>b0_matrix_6_5</em> in order to fit the observed pattern of Entiat
River fish not falling back.</p>
<p>I propose that we get rid of the intercept term, and instead have
only origin term when within DPS boundaries. This would help fix those
strange patterns. The new structure would be as such:</p>
<ul>
<li>No intercept term (<em>b0_matrix_6_5</em> is eliminated)</li>
<li>Wenatchee fish are origin 1, which means they get
<em>borigin1_matrix_6_5</em></li>
<li>Entiat fish are origin 2, which means they get
<em>borigin2_matrix_6_5</em></li>
<li>Methow fish are origin 3, which means they get
<em>borigin3_matrix_6_5</em> (a new parameter)</li>
</ul>
</div>
<div id="intercept-and-spill-collinearity" class="section level3">
<h3>Intercept and spill collinearity</h3>
<div class="float">
<img src="site_figures/pairs_plots/UCW/2_1_pairs_plot.png"
alt="Upper Columbia Wild Steelhead, falling back over Bonneville Dam (moving from state 2, which is BON to MCN, to state 1, which is mouth to BON)." />
<div class="figcaption">Upper Columbia Wild Steelhead, falling back over
Bonneville Dam (moving from state 2, which is BON to MCN, to state 1,
which is mouth to BON).</div>
</div>
<p><br></p>
<p>For fallback movements, especially for fallback over BON, the
intercept (<em>b0_matrix_2_1</em>) and spill window
(<em>bspillwindow_matrix_2_1</em>) parameters are negatively correlated,
with a similar pattern as that seen for the relationship between the
<em>btemp</em> and <em>b0</em> parameters shown above. Note that the
estimate of the spill parameter is small, but this is due to the fact
that spill is not z-scored like temperature is, because zero values for
spill are meaningful - so the covariate values that are being multiplied
by the <em>bspill</em> parameters are about 100 times larger than the
z-scored temperature value.</p>
<p>The same pattern is observed for spill as is observed for
temperature: fallback events occur primarily at high spill levels, but
also with distinct seasonality (these en-route fallback events are
happening primarily when fish have just ascended Bonneville Dam in late
summer). The negative collinearity arises from the pattern that when the
intercept (<em>b0</em>) draw is low, the spill (<em>bspillwindow</em>)
draw must be high to explain the observed movements, and vice versa.</p>
<div class="float">
<img src="site_figures/covariate_plots/BON_spill_transition_plot.png"
style="width:50.0%"
alt="Upper Columbia River Steelhead fallback events at Bonneville Dam by day of year and spill volume." />
<div class="figcaption">Upper Columbia River Steelhead fallback events
at Bonneville Dam by day of year and spill volume.</div>
</div>
<p><br> <br></p>
<div id="pairs-plots-conclusions" class="section level5">
<h5>Pairs plots conclusions</h5>
<p>The correlation between temperature + intercept and spill + intercept
don’t really concern me too much - the posteriors seem to be properly
behaved. They just need to be interpreted as representing seasonality as
much as they are representing the covariates themselves. The origin
vs. intercept correlation and the estimates of some origin parameters
indicates that the origin effects in the model should be restructured,
as the parameter estimates don’t make sense according to the biology of
the populations.</p>
<p>Big picture: The correlation between parameters emphasizes that
parameter estimates cannot be interpreted in isolation. Instead,
posterior predictive estimates of movements are necessary to interpret
the meaning of parameters.</p>
</div>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
